(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,n,t){e.exports=t(52)},41:function(e,n,t){},42:function(e,n,t){},52:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(32),o=t.n(i),c=(t(41),t(12)),u=(t(42),t(13)),s=t.n(u),l=t(17),f=t(35),d=t(18),h=t(19),m=t(7),p=t.n(m),v=(t(44),t(5)),b=t(53),g=function(){function e(){var n=this;Object(d.a)(this,e),this._db=void 0,this.destinations$=void 0,this._db=p.a.firestore(),this.destinations$=v.a.create(function(e){return n._db.collection("destinations").onSnapshot(function(n){var t=[];n.forEach(function(e){return t.push(Object(f.a)({id:e.id},e.data()))}),e.next(t)})}).pipe(Object(b.a)())}return Object(h.a)(e,[{key:"createDestination",value:function(){var e=Object(l.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._db.collection("destinations").add(n);case 2:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()},{key:"deleteDestination",value:function(e){return this._db.collection("destinations").doc(e).delete()}}]),e}(),E=(t(24),function(){function e(){var n=this;Object(d.a)(this,e),this.firebaseAuth=p.a.auth(),this._currentUser$=v.a.create(function(e){n.firebaseAuth.onAuthStateChanged(function(n){e.next(n)})}).pipe(Object(b.a)())}return Object(h.a)(e,[{key:"signIn",value:function(e){}},{key:"signOut",value:function(){var e=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firebaseAuth.signOut();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"currentUser$",get:function(){return this._currentUser$}}]),e}());function w(e,n){return e.localeCompare(n)}function O(e){var n,t=e.destinations,a=e.onCreate,i=e.onDelete,o=t.slice().sort((n=function(e){return e.name},function(e,n){return function(t,a){e(n(t),n(a))}}(w,n))).map(function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("button",{onClick:function(){return i(e)}},"delete")," "+e.name)});return r.a.createElement("div",null,r.a.createElement("ul",null,o),"Add new:",r.a.createElement("br",null),r.a.createElement(k,{onAdd:a}))}function k(e){var n=e.value,t=e.onAdd,i=Object(a.useState)(n),o=Object(c.a)(i,2),u=o[0],s=o[1],l=function(){t({name:u}),s("")};return r.a.createElement("div",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{value:u,onChange:function(e){s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l()}}),r.a.createElement("button",{onClick:l},"Add"))}function j(e){var n=e.destinations,t=Object(a.useState)(),i=Object(c.a)(t,2),o=i[0],u=i[1];return n&&n.length?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e=n.map(function(e){return{dest:e,sort:Math.random()}}).reduce(function(e,n){return e.sort>n.sort?e:n}).dest;u(e)}},"Pick")," ",o&&o.name||"\xa0"):r.a.createElement("div",null)}var A=t(33);function y(e){var n=e.authService,t={signInFlow:"popup",signInOptions:[p.a.auth.GoogleAuthProvider.PROVIDER_ID,p.a.auth.PhoneAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(e){return n.signIn(e.user),!1}}};return r.a.createElement(A.FirebaseAuth,{uiConfig:t,firebaseAuth:n.firebaseAuth})}var C=t(34),S=t(54);p.a.initializeApp({apiKey:"AIzaSyAZv3xYRqBQTuPN02gy6zz25C0LUgpZ6zU",authDomain:"lunchtime-react-95b31.firebaseapp.com",projectId:"lunchtime-react-95b31"});var I=new g,D=new E;function N(){var e=Object(a.useState)(),n=Object(c.a)(e,2),t=n[0],i=n[1],o=Object(a.useState)(null),u=Object(c.a)(o,2),s=u[0],l=u[1];Object(a.useEffect)(function(){var e=D.currentUser$.subscribe(i);return function(){return e.unsubscribe()}},[]),Object(a.useEffect)(function(){var e=D.currentUser$.pipe(Object(S.a)(function(e){return e?I.destinations$:Object(C.a)([])})).subscribe(l);return function(){return e.unsubscribe()}},[]);var f;return t?(f=null==s?r.a.createElement("p",null,"Loading data..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Pick a place"),r.a.createElement(j,{destinations:s}),r.a.createElement("h1",null,"Edit places"),r.a.createElement(O,{destinations:s,onCreate:function(e){I.createDestination(e)},onDelete:function(e){I.deleteDestination(e.id)}})),r.a.createElement("div",null,r.a.createElement("p",null,"Signed in as: ",t.displayName,r.a.createElement("button",{onClick:function(){D.signOut()}},"Sign out")),f)):r.a.createElement(y,{authService:D})}var x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},"Lunchtime")),r.a.createElement("div",{className:"App-body-container"},r.a.createElement("div",{className:"App-body"},r.a.createElement(N,null))))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");x?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):P(e)})}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.ecc53ed7.chunk.js.map